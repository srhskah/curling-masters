{% extends 'layout.html' %}

{% block content %}
<div class="form-container">
  <h2>âœï¸ ç¼–è¾‘èµ›äº‹ä¿¡æ¯</h2>
  <p class="tournament-info">ğŸ“… {{ tournament.season.year }} - ç¬¬{{ tournament.type_session_number }}å±Š</p>
  
  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <div class="flash-messages">
        {% for message in messages %}
          <div class="flash-message flash-success">{{ message }}</div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}
  
  <form method="post">
    <input type="hidden" name="next" value="{{ request.args.get('next','') }}">
    
    <div class="form-group">
      <label for="season_id">ğŸ“… èµ›å­£</label>
      <select id="season_id" name="season_id" required>
        {% for s in seasons %}
          <option value="{{ s.season_id }}" {% if s.season_id == tournament.season_id %}selected{% endif %}>{{ s.year }}</option>
        {% endfor %}
      </select>
    </div>
    
    <div class="form-group">
      <label for="t_format">âš™ï¸ èµ›åˆ¶</label>
      <select id="t_format" name="t_format" required>
        {% for k,v in t_format_labels.items() %}
          <option value="{{ k }}" {% if tournament.t_format == k %}selected{% endif %}>{{ v }}</option>
        {% endfor %}
      </select>
    </div>
    
    <div class="form-group">
      <label for="t_type">ğŸ… æ¯”èµ›ç±»å‹</label>
      <select id="t_type" name="t_type" required>
        <option value="1" {% if tournament.type == 1 %}selected{% endif %}>ğŸ¥‡ æ­£èµ›</option>
        <option value="2" {% if tournament.type == 2 %}selected{% endif %}>ğŸ¥ˆ å°èµ› (CM250)</option>
        <option value="3" {% if tournament.type == 3 %}selected{% endif %}>ğŸ† æ€»å†³èµ›</option>
      </select>
    </div>
    
    <div class="form-group">
      <label for="player_count">ğŸ‘¥ å‚èµ›äººæ•°</label>
      <input type="number" id="player_count" name="player_count" min="2" max="32" value="{{ tournament.player_count or 2 }}" required placeholder="è¯·è¾“å…¥å‚èµ›äººæ•°">
    </div>
    
    <div class="form-group">
      <label for="signup_deadline">â° æŠ¥åæˆªæ­¢æ—¶é—´ï¼ˆå¯é€‰ï¼‰</label>
      <input type="datetime-local" id="signup_deadline" name="signup_deadline" 
             value="{% if signup_deadline %}{{ signup_deadline }}{% endif %}" 
             placeholder="ç•™ç©ºè¡¨ç¤ºä¸é™åˆ¶æŠ¥åæ—¶é—´">
      <small class="form-text text-muted">ä»2025å¹´ä¸‹åŠå¹´å¼€å§‹ï¼Œè®¾ç½®æŠ¥åæˆªæ­¢æ—¶é—´åï¼Œå‚èµ›é€‰æ‰‹åªèƒ½ä»å·²æŠ¥åç”¨æˆ·ä¸­é€‰æ‹©</small>
    </div>
    
    <button type="submit" class="form-button">ä¿å­˜ä¿®æ”¹</button>
  </form>
  
  <div class="form-links">
    <p><a href="{{ request.args.get('next', url_for('admin_index')) }}">â† è¿”å›</a></p>
  </div>
</div>

<style>
.tournament-info {
  text-align: center;
  color: #666;
  font-size: 1.1em;
  margin-bottom: 20px;
  padding: 10px;
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  border-radius: 8px;
  border: 1px solid #dee2e6;
}
</style>
{% endblock %}
